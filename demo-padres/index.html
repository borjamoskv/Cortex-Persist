<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Vosotros</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;400;700;900&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;background:#050505;font-family:'Outfit',sans-serif}
canvas{position:fixed;top:0;left:0;z-index:0}

/* Overlay content */
.content{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10;display:flex;flex-direction:column;justify-content:center;align-items:center;pointer-events:none}
.greeting{text-align:center;opacity:0;animation:fadeUp 2s 0.5s ease forwards}
.greeting h1{font-size:clamp(2.5rem,7vw,5rem);font-weight:900;letter-spacing:-2px;color:#fff;line-height:1.1;margin-bottom:16px;text-shadow:0 0 80px rgba(212,175,55,0.3)}
.greeting h1 span{background:linear-gradient(135deg,#d4af37,#f5d76e,#d4af37);-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 30px rgba(212,175,55,0.4))}
.greeting p{font-size:clamp(1rem,2.5vw,1.5rem);font-weight:200;color:rgba(255,255,255,0.5);letter-spacing:0.1em;max-width:600px;margin:0 auto;line-height:1.7}
.greeting .heart{display:inline-block;color:#d4af37;font-size:1.2em;animation:heartbeat 1.5s ease infinite;margin:0 4px}

/* Subtitle reveal */
.sub{opacity:0;animation:fadeUp 2s 2s ease forwards;margin-top:40px;text-align:center}
.sub p{font-size:clamp(0.8rem,1.5vw,1rem);color:rgba(255,255,255,0.25);font-weight:200;letter-spacing:0.3em;text-transform:uppercase}

/* Music hint */
.music-hint{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);z-index:20;opacity:0;animation:fadeUp 1.5s 3.5s ease forwards;pointer-events:all}
.music-hint button{background:rgba(212,175,55,0.1);border:1px solid rgba(212,175,55,0.3);color:#d4af37;font-family:'Outfit',sans-serif;font-size:13px;letter-spacing:0.15em;padding:12px 32px;border-radius:100px;cursor:pointer;transition:all 0.4s;text-transform:uppercase;font-weight:400}
.music-hint button:hover{background:rgba(212,175,55,0.2);border-color:#d4af37;box-shadow:0 0 40px rgba(212,175,55,0.2)}

/* Counter */
.counter{position:fixed;top:30px;right:30px;z-index:20;opacity:0;animation:fadeUp 1.5s 4s ease forwards;text-align:right}
.counter .num{font-size:clamp(2rem,4vw,3rem);font-weight:900;background:linear-gradient(135deg,#d4af37,#f5d76e);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.counter .label{font-size:11px;color:rgba(255,255,255,0.2);letter-spacing:0.2em;text-transform:uppercase}

/* Signature */
.sig{position:fixed;bottom:30px;right:30px;z-index:20;opacity:0;animation:fadeUp 1.5s 4.5s ease forwards}
.sig p{font-size:11px;color:rgba(255,255,255,0.15);letter-spacing:0.15em}

@keyframes fadeUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
@keyframes heartbeat{0%,100%{transform:scale(1)}50%{transform:scale(1.3)}}
</style>
</head>
<body>

<canvas id="c"></canvas>

<div class="content">
  <div class="greeting">
    <h1>Esto es lo que <span>construyo</span></h1>
    <p>
      Cada una de estas partículas doradas representa una línea de código que he escrito.
      <br>Son miles. Y cada una tiene un propósito: <span class="heart">crear</span> algo que antes no existía.
    </p>
  </div>
  <div class="sub">
    <p>Para Aita y Ama · Con todo el cariño del mundo</p>
  </div>
</div>

<div class="counter">
  <div class="num" id="lineCount">0</div>
  <div class="label">líneas de código</div>
</div>

<div class="music-hint">
  <button id="soundBtn">✦ Activar Ambiente ✦</button>
</div>

<div class="sig">
  <p>MOSKV-1 · 2026</p>
</div>

<script>
// === GOLDEN PARTICLE SYSTEM ===
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let W, H;
const particles = [];
const PARTICLE_COUNT = 220;
let mouse = { x: -1000, y: -1000 };

class Particle {
  constructor() { this.reset(true); }
  reset(initial) {
    this.x = Math.random() * W;
    this.y = initial ? Math.random() * H : H + 20;
    this.size = Math.random() * 3 + 0.5;
    this.speedY = -(Math.random() * 0.8 + 0.15);
    this.speedX = (Math.random() - 0.5) * 0.3;
    this.opacity = Math.random() * 0.6 + 0.1;
    this.life = Math.random();
    this.golden = Math.random();
    this.wobbleSpeed = Math.random() * 0.02 + 0.005;
    this.wobbleAmp = Math.random() * 30 + 10;
    this.phase = Math.random() * Math.PI * 2;
  }
  update() {
    this.life += 0.002;
    this.phase += this.wobbleSpeed;
    this.x += this.speedX + Math.sin(this.phase) * 0.3;
    this.y += this.speedY;

    // Gentle mouse repulsion
    const dx = this.x - mouse.x;
    const dy = this.y - mouse.y;
    const dist = Math.sqrt(dx * dx + dy * dy);
    if (dist < 150) {
      const force = (150 - dist) / 150 * 0.8;
      this.x += (dx / dist) * force;
      this.y += (dy / dist) * force;
    }

    // Pulse opacity
    this.opacity = (Math.sin(this.life * 3) * 0.3 + 0.4) * (1 - Math.abs(this.y - H / 2) / (H / 2) * 0.5);

    if (this.y < -20 || this.x < -20 || this.x > W + 20) this.reset(false);
  }
  draw() {
    const r = this.golden > 0.3 ? 212 : 245;
    const g = this.golden > 0.3 ? 175 : 215;
    const b = this.golden > 0.3 ? 55 : 110;

    // Glow
    const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size * 6);
    gradient.addColorStop(0, `rgba(${r},${g},${b},${this.opacity * 0.3})`);
    gradient.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = gradient;
    ctx.fillRect(this.x - this.size * 6, this.y - this.size * 6, this.size * 12, this.size * 12);

    // Core
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(${r},${g},${b},${this.opacity})`;
    ctx.fill();
  }
}

function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

// Init particles
for (let i = 0; i < PARTICLE_COUNT; i++) particles.push(new Particle());

// Draw connections between nearby particles
function drawConnections() {
  for (let i = 0; i < particles.length; i++) {
    for (let j = i + 1; j < particles.length; j++) {
      const dx = particles[i].x - particles[j].x;
      const dy = particles[i].y - particles[j].y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < 100) {
        const alpha = (1 - dist / 100) * 0.08;
        ctx.beginPath();
        ctx.moveTo(particles[i].x, particles[i].y);
        ctx.lineTo(particles[j].x, particles[j].y);
        ctx.strokeStyle = `rgba(212,175,55,${alpha})`;
        ctx.lineWidth = 0.5;
        ctx.stroke();
      }
    }
  }
}

function animate() {
  ctx.fillStyle = 'rgba(5,5,5,0.12)';
  ctx.fillRect(0, 0, W, H);

  drawConnections();
  particles.forEach(p => { p.update(); p.draw(); });

  requestAnimationFrame(animate);
}
animate();

// Mouse tracking
document.addEventListener('mousemove', e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

// === LINE COUNTER ANIMATION ===
const TARGET = 47832;
const counterEl = document.getElementById('lineCount');
let current = 0;
function animateCounter() {
  if (current < TARGET) {
    const step = Math.max(1, Math.floor((TARGET - current) / 40));
    current = Math.min(current + step, TARGET);
    counterEl.textContent = current.toLocaleString('es-ES');
    requestAnimationFrame(animateCounter);
  }
}
setTimeout(animateCounter, 4200);

// === AMBIENT SOUND ===
const soundBtn = document.getElementById('soundBtn');
let audioCtx = null;
let playing = false;

function createAmbient() {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  // Deep warm pad
  const osc1 = audioCtx.createOscillator();
  osc1.type = 'sine';
  osc1.frequency.value = 65.41; // C2
  const g1 = audioCtx.createGain();
  g1.gain.value = 0.07;

  // Shimmer fifth
  const osc2 = audioCtx.createOscillator();
  osc2.type = 'sine';
  osc2.frequency.value = 98; // ~G2
  const g2 = audioCtx.createGain();
  g2.gain.value = 0.04;

  // High ethereal
  const osc3 = audioCtx.createOscillator();
  osc3.type = 'sine';
  osc3.frequency.value = 261.63; // C4
  const g3 = audioCtx.createGain();
  g3.gain.value = 0.015;

  // Golden overtone
  const osc4 = audioCtx.createOscillator();
  osc4.type = 'triangle';
  osc4.frequency.value = 392; // G4
  const g4 = audioCtx.createGain();
  g4.gain.value = 0.008;

  // LFO for organic movement
  const lfo = audioCtx.createOscillator();
  lfo.type = 'sine';
  lfo.frequency.value = 0.07;
  const lfoG = audioCtx.createGain();
  lfoG.gain.value = 2;
  lfo.connect(lfoG);
  lfoG.connect(osc2.frequency);

  // Warmth filter
  const filter = audioCtx.createBiquadFilter();
  filter.type = 'lowpass';
  filter.frequency.value = 600;
  filter.Q.value = 0.7;

  const master = audioCtx.createGain();
  master.gain.value = 0;

  osc1.connect(g1).connect(filter);
  osc2.connect(g2).connect(filter);
  osc3.connect(g3).connect(filter);
  osc4.connect(g4).connect(filter);
  filter.connect(master).connect(audioCtx.destination);

  [osc1, osc2, osc3, osc4, lfo].forEach(o => o.start());
  master.gain.linearRampToValueAtTime(1, audioCtx.currentTime + 4);

  return { master, oscs: [osc1, osc2, osc3, osc4, lfo] };
}

let amb = null;
soundBtn.addEventListener('click', () => {
  if (!playing) {
    amb = createAmbient();
    playing = true;
    soundBtn.textContent = '✦ Sonando ✦';
    soundBtn.style.borderColor = '#d4af37';
    soundBtn.style.boxShadow = '0 0 30px rgba(212,175,55,0.3)';
  } else {
    if (amb) {
      amb.master.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 1.5);
      setTimeout(() => { amb.oscs.forEach(o => o.stop()); audioCtx.close(); audioCtx = null; }, 2000);
    }
    playing = false;
    soundBtn.textContent = '✦ Activar Ambiente ✦';
    soundBtn.style.borderColor = 'rgba(212,175,55,0.3)';
    soundBtn.style.boxShadow = 'none';
  }
});
</script>
</body>
</html>
